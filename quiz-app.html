<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QC Skills Test - á”áŸ’ášá¡á„áœá¶áŸáŸ‹áŸá˜ááŸ’áá—á¶á–</title>
    <style>
        /* ==================== Styles & Design ==================== */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Microsoft YaHei', 'Khmer OS Battambang', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0; padding: 20px;
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }

        .container {
            background: white; border-radius: 25px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%; max-width: 550px; padding: 40px; text-align: center;
            position: relative; overflow: hidden;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .progress-bar {
            width: 100%; height: 8px; background-color: #e8e8e8; border-radius: 10px;
            margin: 20px 0; overflow: hidden;
        }

        .progress-fill {
            height: 100%; background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%; transition: width 0.4s ease;
        }

        .chinese-word {
            font-size: 72px; font-weight: bold; color: #333; margin: 20px 0;
            text-shadow: 3px 3px 0px rgba(102, 126, 234, 0.2);
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes popIn { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        .options-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 30px;
        }

        button {
            background: white; border: 3px solid #f0f0f0; border-radius: 18px;
            padding: 15px 10px; font-family: 'Khmer OS Battambang';
            font-size: 16px; font-weight: bold; color: #444; cursor: pointer;
            transition: all 0.2s; min-height: 80px; display: flex; align-items: center; justify-content: center;
        }

        button:hover { border-color: #667eea; transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
        
        button.correct { background: #2ecc71; color: white; border-color: #27ae60; }
        button.wrong { background: #e74c3c; color: white; border-color: #c0392b; animation: shake 0.5s; }

        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }

        .result-screen { display: none; }
        .final-score { font-size: 72px; font-weight: bold; color: #667eea; margin: 15px 0; }
        
        .btn-restart { 
            background: #667eea; color: white; border: none; width: 100%; height: 55px; 
            border-radius: 15px; font-size: 18px; cursor: pointer; margin-top: 20px;
        }

        .sound-btn { position: absolute; top: 15px; left: 15px; background: none; border: none; font-size: 20px; cursor: pointer; opacity: 0.5; width: 40px; height: 40px; }

        @media (max-width: 500px) {
            .options-grid { grid-template-columns: 1fr; }
            .chinese-word { font-size: 55px; }
        }
    </style>
</head>
<body>

    <div class="container">
        <button class="sound-btn" onclick="toggleSound()" id="soundIcon">ğŸ”Š</button>

        <!-- Quiz Interface -->
        <div id="quiz-screen">
            <h2 style="color: #667eea;">âœï¸ QC Quiz App</h2>
            <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
            <p style="color: #888; font-weight: bold;">áŸáŸ†áá½ášá‘á¸ <span id="currentQNum">1</span> / <span id="totalQNum">10</span></p>
            
            <div class="chinese-word" id="displayWord">...</div>
            <p style="color: #999;">á‡áŸ’ášá¾áŸášá¾áŸá¢ááŸ’áá“áŸá™áŠáŸ‚á›ááŸ’ášá¹á˜ááŸ’ášá¼áœáŸ–</p>

            <div class="options-grid" id="optionsBox"></div>
        </div>

        <!-- Result Interface -->
        <div id="result-screen" class="result-screen">
            <h1>ğŸ† á€á¶ášá”áŸ’ášá¡á„á”á¶á“á”á‰áŸ’á…á”áŸ‹</h1>
            <div class="final-score" id="finalScoreText">0</div>
            <p id="feedbackText" style="font-weight: bold; font-size: 20px; margin-bottom: 20px;"></p>
            <button class="btn-restart" onclick="restartQuiz()">ğŸ”„ áŸá¶á€á›áŸ’á”á„á˜áŸ’áŠá„á‘áŸ€á</button>
        </div>
    </div>

    <script>
        // áŸ¡. áƒáŸ’á›á¶áŸ†á„á‘á·á“áŸ’á“á“áŸá™ (áŸ¤áŸ© á–á¶á€áŸ’á™á–áŸá‰á›áŸá‰)
        const database = [
            { cn: "å·¥å‚", km: "ášáŸ„á„á…á€áŸ’áš" }, { cn: "è½¦é—´", km: "ášáŸ„á„á‡á¶á„ / á¢á¶á‚á¶áš" }, { cn: "åŠå…¬å®¤", km: "á€á¶ášá·á™á¶á›áŸá™" },
            { cn: "ç­é•¿", km: "á”áŸ’ášá’á¶á“á€áŸ’ášá»á˜" }, { cn: "ç¿»è¯‘", km: "á¢áŸ’á“á€á”á€á”áŸ’ášáŸ‚" }, { cn: "æ³¨æ„å®‰å…¨", km: "á”áŸ’ášá™áŸááŸ’á“áŸá»áœááŸ’áá·á—á¶á–" },
            { cn: "ä¸Šç­", km: "á…á¼á›á’áŸ’áœá¾á€á¶áš" }, { cn: "ä¸‹ç­", km: "á…áŸá‰á–á¸á’áŸ’áœá¾á€á¶áš" }, { cn: "è¯·å‡", km: "áŸá»áŸ†á…áŸ’á”á¶á”áŸ‹" },
            { cn: "è½¦æ¶", km: "áá½á€á„áŸ‹" }, { cn: "å‰å‰", km: "á†áŸ’á–áŸ„áŸ‡á˜á»á (Fork)" }, { cn: "è½¦æŠŠ", km: "áŠáŸƒá€á„áŸ‹" },
            { cn: "è½¦åœˆ", km: "ááŸ’á“á„á€á„áŸ‹" }, { cn: "å¤–èƒ", km: "áŸáŸ†á”á€á€á„áŸ‹" }, { cn: "è„šè¸", km: "áˆáŸ’á“á¶á“áŸ‹" },
            { cn: "é“¾æ¡", km: "á…áŸ’ášáœá¶á€áŸ‹" }, { cn: "åº§å«", km: "á€áŸ‚á”" }, { cn: "åˆ¹è½¦", km: "á áŸ’áœáŸ’ášá¶áŸ†á„" },
            { cn: "æµ‹é‡å€¼", km: "áá˜áŸ’á›áŸƒáœá¶áŸáŸ‹á‡á¶á€áŸ‹áŸáŸ’ááŸ‚á„" }, { cn: "æ ‡å‡†å€¼", km: "áá˜áŸ’á›áŸƒáŸáŸ’áá„áŸ‹áŠá¶" }, { cn: "ä¸Šé™", km: "áŠáŸ‚á“á€áŸ†áááŸ‹ á›á¾" },
            { cn: "ä¸‹é™", km: "áŠáŸ‚á“á€áŸ†áááŸ‹ á€áŸ’ášáŸ„á˜" }, { cn: "è¶‹åŠ¿å›¾", km: "á€áŸ’ášá¶á”á“á·á“áŸ’á“á¶á€á¶áš" }, { cn: "åˆæ ¼", km: "á‡á¶á”áŸ‹ (OK)" },
            { cn: "ä¸åˆæ ¼", km: "á’áŸ’á›á¶á€áŸ‹ (NG)" }, { cn: "å¼€è£‚", km: "á”áŸ’ášáŸáŸ‡ (Crack)" }, { cn: "ç„Šç ´", km: "á•áŸ’áŸá¶á’áŸ’á›á»áŸ‡" },
            { cn: "æ¼ç„Š", km: "á—áŸ’á›áŸá…á•áŸ’áŸá¶áš" }, { cn: "é’ˆçœ¼", km: "á—áŸ’á“áŸ‚á€á˜áŸ’á‡á»á›" }, { cn: "å‡¹é™·", km: "á€áŸ†á–á·á / á•á" },
            { cn: "ç„Šé“åå¿ƒ", km: "á•áŸ’áŸá¶ášáœáŸ€á…" }, { cn: "ç”µå‡»ä¼¤", km: "á†áŸáŸ‡á˜áŸ‰á¶áŸ" }, { cn: "å †ç„Š", km: "á•áŸ’áŸá¶ášá‘á¼á›" },
            { cn: "å’¬è¾¹", km: "áŸáŸŠá¸áŸá¶á…áŸ‹á”áŸ†á–á„áŸ‹" }, { cn: "é—´éš™", km: "á…á“áŸ’á›áŸ„áŸ‡ / á á¾á”" }, { cn: "ç¢°åˆ®ä¼¤", km: "á”áŸ‰áŸ‡á‘á„áŸ’á‚á·á… / á€áŸ„áŸ" },
            { cn: "ç„Šæ¸£", km: "á€áŸ†á‘áŸá…á•áŸ’áŸá¶áš" },
            // áŸ¡áŸ¢ á–á¶á€áŸ’á™á”á“áŸ’ááŸ‚á˜ááŸ’á˜á¸
            { cn: "èµ·æ³¡", km: "á–á„ / á…á¼á›ááŸ’á™á›áŸ‹" }, { cn: "æ ‡çº¸ä¸è‰¯", km: "ááŸ‚á˜á˜á·á“á›áŸ’á¢" }, { cn: "ä¿®è¡¥ç—•", km: "áŸáŸ’á“á¶á˜á‡á½áŸá‡á»á› / áŸáŸ’á“á¶á˜á€áŸ‚" },
            { cn: "æ‚è´¨", km: "á’á¼á›á¸ / á€áŸ†á‘áŸá…á€áŸ†á‘á¸" }, { cn: "è„æ±¡", km: "á”áŸ’ášá¡á¶á€áŸ‹" }, { cn: "æ ‡çº¸ä½ç½®ä¸å¯¹", km: "á”á·á‘ááŸ‚á˜áá»áŸá‘á¸áá¶áŸ†á„" },
            { cn: "æ ‡çº¸ä¸å¯¹ç§°", km: "á”á·á‘ááŸ‚á˜á˜á·á“áŸáŸ’á˜á¾á‚áŸ’á“á¶" }, { cn: "é›¾é¢", km: "áŸáŸ’ášá¢á¶á”áŸ‹" }, { cn: "æ©˜çš®", km: "áŸáŸ†á”á€á€áŸ’ášá¼á…" },
            { cn: "é’ˆå­”", km: "ášá“áŸ’á’á˜áŸ’á‡á»á›" }, { cn: "æ¶ˆå…‰ä¸è‰¯", km: "á‘á¹á€ááŸ’á“á¶áŸ†áŸáŸ’ášá¢á¶á”áŸ‹á˜á·á“á›áŸ’á¢" }, { cn: "é˜²æ¼†ä¸è‰¯", km: "á€á¶ášá–á¶ášá‘á¹á€ááŸ’á“á¶áŸ†á˜á·á“á”á¶á“á›áŸ’á¢" }
        ];

        let quizData = [];
        let currentIndex = 0;
        let score = 0;
        let soundOn = true;
        const totalQs = 10;

        // áŸ¢. á˜á»áá„á¶ášá”áŸ†á–á„áŸáŸ†á¡áŸá„ (Sound Synth)
        function playSfx(correct) {
            if(!soundOn) return;
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain); gain.connect(ctx.destination);
            osc.frequency.value = correct ? 600 : 200;
            gain.gain.setValueAtTime(0.1, ctx.currentTime);
            osc.start(); gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.2);
            osc.stop(ctx.currentTime + 0.2);
        }

        function toggleSound() {
            soundOn = !soundOn;
            document.getElementById('soundIcon').innerText = soundOn ? 'ğŸ”Š' : 'ğŸ”‡';
        }

        // áŸ£. Logic á€á˜áŸ’á˜áœá·á’á¸
        function restartQuiz() {
            score = 0; currentIndex = 0;
            quizData = [...database].sort(() => Math.random() - 0.5).slice(0, totalQs);
            document.getElementById('quiz-screen').style.display = 'block';
            document.getElementById('result-screen').style.display = 'none';
            loadQuestion();
        }

        function loadQuestion() {
            const q = quizData[currentIndex];
            document.getElementById('displayWord').innerText = q.cn;
            document.getElementById('currentQNum').innerText = currentIndex + 1;
            document.getElementById('totalQNum').innerText = totalQs;
            document.getElementById('progressFill').style.width = `${(currentIndex / totalQs) * 100}%`;

            // ášá¾áŸá…á˜áŸ’á›á¾á™á”á“áŸ’á›áŸ† áŸ£
            let wrongOptions = database.filter(i => i.km !== q.km).sort(() => Math.random() - 0.5).slice(0, 3);
            let options = [...wrongOptions, q].sort(() => Math.random() - 0.5);

            const box = document.getElementById('optionsBox');
            box.innerHTML = '';
            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.innerText = opt.km;
                btn.onclick = () => checkAnswer(btn, opt.km === q.km);
                box.appendChild(btn);
            });
        }

        function checkAnswer(btn, isCorrect) {
            const btns = document.querySelectorAll('#optionsBox button');
            btns.forEach(b => b.disabled = true);

            if(isCorrect) {
                btn.classList.add('correct');
                score++;
                playSfx(true);
            } else {
                btn.classList.add('wrong');
                playSfx(false);
                btns.forEach(b => { if(b.innerText === quizData[currentIndex].km) b.classList.add('correct'); });
            }

            setTimeout(() => {
                currentIndex++;
                if(currentIndex < totalQs) loadQuestion();
                else showFinalResult();
            }, 1500);
        }

        function showFinalResult() {
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            document.getElementById('finalScoreText').innerText = `${score} / ${totalQs}`;
            
            const feedback = document.getElementById('feedbackText');
            if(score === 10) feedback.innerText = "á›áŸ’á¢á¥áááŸ’á…áŸ„áŸ‡! á¢áŸ’á“á€á‚áºá‡á¶ QC á€áŸ†á–á¼á›á¢á„áŸ‹á¢á¶á…! ğŸŒŸ";
            else if(score >= 7) feedback.innerText = "á’áŸ’áœá¾á”á¶á“á›áŸ’á¢áá¶áŸáŸ‹! á”á“áŸ’áá€á¶ášááŸ†á”áŸ’ášá¹á„á‘áŸ€á! ğŸ‘";
            else feedback.innerText = "áá·áááŸ†ášáŸ€á“á”á“áŸ’ááŸ‚á˜á‘áŸ€á! áŸáŸŠá¼áŸ—! ğŸ’ª";
        }

        // á…á¶á”áŸ‹á•áŸ’áŠá¾á˜áŠáŸ†á”á¼á„
        restartQuiz();
    </script>

</body>
</html>
