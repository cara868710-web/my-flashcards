<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>QC Smart Test Pro</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Battambang:wght@400;700&family=Orbitron:wght@700;900&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* â”€â”€â”€ Design Tokens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        :root {
            --bg:       #070b1a;
            --surface:  #0f1630;
            --card:     #141d38;
            --border:   #1e2d52;
            --primary:  #4f8ef7;
            --accent:   #f4c430;
            --success:  #22d472;
            --danger:   #ff4d6d;
            --text:     #e8eaf6;
            --muted:    #7b89b8;
            --radius:   20px;
            --shadow:   0 24px 60px rgba(0,0,0,0.5);
        }

        /* â”€â”€â”€ Reset & Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        *, *::before, *::after {
            margin: 0; padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        html, body {
            height: 100%;
            font-family: 'DM Sans', 'Battambang', sans-serif;
        }
        body {
            background: var(--bg);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px 15px 40px;
            overflow-x: hidden;
        }

        /* â”€â”€â”€ Animated Background â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        body::before {
            content: '';
            position: fixed; inset: 0;
            background:
                radial-gradient(ellipse 60% 40% at 20% 10%, rgba(79,142,247,0.12) 0%, transparent 60%),
                radial-gradient(ellipse 50% 40% at 80% 80%, rgba(244,196,48,0.07) 0%, transparent 60%);
            pointer-events: none;
            z-index: 0;
        }

        /* â”€â”€â”€ Container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .wrap {
            position: relative;
            z-index: 1;
            width: 100%;
            max-width: 460px;
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        /* â”€â”€â”€ Header Brand â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .brand-header {
            text-align: center;
            padding: 28px 20px 20px;
        }
        .brand-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(79,142,247,0.12);
            border: 1px solid rgba(79,142,247,0.3);
            border-radius: 100px;
            padding: 6px 16px;
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 2px;
            color: var(--primary);
            text-transform: uppercase;
            margin-bottom: 14px;
        }
        .brand-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 26px;
            font-weight: 900;
            color: var(--text);
            letter-spacing: 1px;
            line-height: 1.2;
        }
        .brand-title span {
            color: var(--accent);
        }
        .brand-sub {
            font-family: 'Battambang', sans-serif;
            font-size: 14px;
            color: var(--muted);
            margin-top: 6px;
        }

        /* â”€â”€â”€ Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 28px 24px;
            box-shadow: var(--shadow);
        }

        /* â”€â”€â”€ Login Screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #login-box { display: block; }

        .login-icon {
            font-size: 56px;
            margin-bottom: 16px;
            display: block;
        }
        .login-title {
            font-family: 'Battambang', sans-serif;
            font-size: 22px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 6px;
        }
        .login-desc {
            font-family: 'Battambang', sans-serif;
            font-size: 13px;
            color: var(--muted);
            margin-bottom: 28px;
            line-height: 1.6;
        }

        .input-wrap {
            position: relative;
            margin-bottom: 16px;
        }
        .input-wrap .icon {
            position: absolute;
            left: 16px; top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
            pointer-events: none;
        }
        input[type="text"] {
            width: 100%;
            padding: 16px 16px 16px 48px;
            background: var(--surface);
            border: 1.5px solid var(--border);
            border-radius: 14px;
            font-size: 16px;
            font-family: 'Battambang', sans-serif;
            color: var(--text);
            outline: none;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        input[type="text"]::placeholder { color: var(--muted); }
        input[type="text"]:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79,142,247,0.15);
        }

        .info-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 24px;
        }
        .info-chip {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px;
            text-align: center;
        }
        .info-chip .num {
            font-family: 'Orbitron', sans-serif;
            font-size: 22px;
            font-weight: 700;
            color: var(--accent);
        }
        .info-chip .lbl {
            font-family: 'Battambang', sans-serif;
            font-size: 11px;
            color: var(--muted);
            margin-top: 2px;
        }

        /* â”€â”€â”€ Primary Button â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .btn-primary {
            width: 100%;
            padding: 17px;
            background: linear-gradient(135deg, var(--primary) 0%, #6fa8ff 100%);
            border: none;
            border-radius: 14px;
            font-family: 'Battambang', sans-serif;
            font-size: 17px;
            font-weight: 700;
            color: #fff;
            cursor: pointer;
            letter-spacing: 0.5px;
            box-shadow: 0 8px 24px rgba(79,142,247,0.35);
            transition: transform 0.15s, box-shadow 0.15s;
            position: relative;
            overflow: hidden;
        }
        .btn-primary::after {
            content: '';
            position: absolute; inset: 0;
            background: linear-gradient(180deg, rgba(255,255,255,0.12) 0%, transparent 60%);
        }
        .btn-primary:active {
            transform: scale(0.97);
            box-shadow: 0 4px 12px rgba(79,142,247,0.2);
        }

        /* â”€â”€â”€ Quiz Screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #quiz-box { display: none; }

        /* Top row */
        .quiz-topbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 18px;
        }
        .candidate-tag {
            display: flex;
            align-items: center;
            gap: 7px;
            background: rgba(79,142,247,0.1);
            border: 1px solid rgba(79,142,247,0.2);
            border-radius: 100px;
            padding: 6px 14px;
            font-family: 'Battambang', sans-serif;
            font-size: 13px;
            color: var(--primary);
            font-weight: 700;
            max-width: 55%;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
        .score-live {
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(244,196,48,0.08);
            border: 1px solid rgba(244,196,48,0.2);
            border-radius: 100px;
            padding: 6px 14px;
            font-family: 'Orbitron', sans-serif;
            font-size: 13px;
            font-weight: 700;
            color: var(--accent);
        }

        /* Progress */
        .progress-wrap {
            margin-bottom: 20px;
        }
        .progress-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .progress-label {
            font-family: 'Battambang', sans-serif;
            font-size: 12px;
            color: var(--muted);
        }
        .progress-count {
            font-family: 'Orbitron', sans-serif;
            font-size: 12px;
            color: var(--primary);
            font-weight: 700;
        }
        .progress-track {
            width: 100%;
            height: 6px;
            background: var(--surface);
            border-radius: 100px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            width: 0%;
            border-radius: 100px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transition: width 0.4s cubic-bezier(0.4,0,0.2,1);
        }

        /* Image box */
        .img-box {
            width: 100%;
            height: 180px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 18px;
            display: none;
            position: relative;
        }
        .img-box img {
            width: 100%; height: 100%;
            object-fit: contain;
        }
        .img-box .img-label {
            position: absolute;
            top: 8px; left: 8px;
            background: rgba(10,14,26,0.8);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 3px 9px;
            font-size: 10px;
            font-weight: 700;
            letter-spacing: 1px;
            color: var(--muted);
            text-transform: uppercase;
        }

        /* Chinese word */
        .word-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 22px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }
        .chinese-word {
            font-size: 52px;
            font-weight: 900;
            color: var(--text);
            line-height: 1;
            flex: 1;
            text-align: left;
        }
        .speak-btn {
            flex-shrink: 0;
            width: 52px; height: 52px;
            background: rgba(79,142,247,0.1);
            border: 1.5px solid rgba(79,142,247,0.3);
            border-radius: 14px;
            font-size: 22px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s, transform 0.15s;
        }
        .speak-btn:active {
            background: rgba(79,142,247,0.25);
            transform: scale(0.93);
        }

        /* Hint row */
        .hint-row {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 18px;
        }
        .hint-dot {
            width: 6px; height: 6px;
            border-radius: 50%;
            background: var(--accent);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        .hint-text {
            font-family: 'Battambang', sans-serif;
            font-size: 12px;
            color: var(--muted);
        }

        /* Options grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .option-btn {
            padding: 14px 10px;
            background: var(--surface);
            border: 1.5px solid var(--border);
            border-radius: 14px;
            cursor: pointer;
            font-family: 'Battambang', sans-serif;
            font-weight: 700;
            font-size: 14px;
            color: var(--text);
            min-height: 72px;
            text-align: center;
            line-height: 1.4;
            transition: border-color 0.15s, background 0.15s, transform 0.1s;
        }
        .option-btn:not(:disabled):hover {
            border-color: var(--primary);
            background: rgba(79,142,247,0.08);
        }
        .option-btn:not(:disabled):active {
            transform: scale(0.96);
        }
        .option-btn.correct {
            background: rgba(34,212,114,0.15) !important;
            border-color: var(--success) !important;
            color: var(--success) !important;
        }
        .option-btn.wrong {
            background: rgba(255,77,109,0.15) !important;
            border-color: var(--danger) !important;
            color: var(--danger) !important;
            animation: shake 0.35s ease;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%  { transform: translateX(-6px); }
            40%  { transform: translateX(6px); }
            60%  { transform: translateX(-4px); }
            80%  { transform: translateX(4px); }
        }

        /* â”€â”€â”€ Result Screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #result-box { display: none; }

        .result-trophy {
            font-size: 64px;
            margin-bottom: 10px;
            display: block;
            animation: popIn 0.5s cubic-bezier(0.34,1.56,0.64,1) both;
        }
        @keyframes popIn {
            from { transform: scale(0); opacity: 0; }
            to   { transform: scale(1); opacity: 1; }
        }
        .result-name {
            font-family: 'Battambang', sans-serif;
            font-size: 16px;
            color: var(--muted);
            margin-bottom: 18px;
        }
        .result-score-ring {
            width: 140px; height: 140px;
            margin: 0 auto 20px;
            border-radius: 50%;
            background: conic-gradient(
                var(--primary) var(--pct, 0%),
                var(--surface) var(--pct, 0%)
            );
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .result-score-ring::before {
            content: '';
            position: absolute; inset: 10px;
            border-radius: 50%;
            background: var(--card);
        }
        .result-score-inner {
            position: relative;
            z-index: 1;
            text-align: center;
        }
        .result-score-num {
            font-family: 'Orbitron', sans-serif;
            font-size: 30px;
            font-weight: 900;
            color: var(--text);
            line-height: 1;
        }
        .result-score-label {
            font-family: 'Battambang', sans-serif;
            font-size: 11px;
            color: var(--muted);
            margin-top: 3px;
        }

        .result-grade {
            display: inline-block;
            padding: 6px 20px;
            border-radius: 100px;
            font-family: 'Orbitron', sans-serif;
            font-size: 13px;
            font-weight: 700;
            letter-spacing: 1px;
            margin-bottom: 18px;
        }
        .grade-s  { background: rgba(244,196,48,0.15); color: var(--accent); border: 1px solid rgba(244,196,48,0.4); }
        .grade-a  { background: rgba(34,212,114,0.15); color: var(--success); border: 1px solid rgba(34,212,114,0.4); }
        .grade-b  { background: rgba(79,142,247,0.15); color: var(--primary); border: 1px solid rgba(79,142,247,0.4); }
        .grade-c  { background: rgba(255,77,109,0.15); color: var(--danger); border: 1px solid rgba(255,77,109,0.4); }

        .result-msg {
            font-family: 'Battambang', sans-serif;
            font-size: 15px;
            color: var(--muted);
            margin-bottom: 22px;
            line-height: 1.6;
        }

        .status-chip {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 10px 16px;
            font-family: 'Battambang', sans-serif;
            font-size: 13px;
            color: var(--muted);
            margin-bottom: 20px;
            justify-content: center;
        }
        .status-chip .dot-ok  { color: var(--success); font-size: 16px; }
        .status-chip .dot-err { color: var(--danger); font-size: 16px; }

        /* â”€â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .footer {
            text-align: center;
            padding: 18px 0 0;
            font-size: 11px;
            color: rgba(123,137,184,0.5);
            letter-spacing: 0.5px;
        }

        /* â”€â”€â”€ Transition helper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .fade-in {
            animation: fadeIn 0.35s ease both;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to   { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
<div class="wrap">

    <!-- â”€â”€ Brand Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="brand-header">
        <div class="brand-badge">âš™ï¸ Quality Control</div>
        <div class="brand-title">QC<span>SMART</span> TEST</div>
        <div class="brand-sub">á”áŸ’ášá–áŸá“áŸ’á’á’áŸ’áœá¾ááŸáŸáŸ’á QC á‘áŸ†á“á¾á”</div>
    </div>

    <!-- â”€â”€ Login Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="card fade-in" id="login-box">
        <span class="login-icon">ğŸ¯</span>
        <div class="login-title">á…á¼á›ášá½á˜ááŸáŸáŸ’á</div>
        <div class="login-desc">
            á”á‰áŸ’á…á¼á›áˆáŸ’á˜áŸ„áŸ‡á”á»á‚áŸ’á‚á›á·á€ášá”áŸáŸ‹á¢áŸ’á“á€<br>
            áŠá¾á˜áŸ’á”á¸á…á¶á”áŸ‹á•áŸ’áŠá¾á˜á€á¶ášáœá¶á™áá˜áŸ’á›áŸƒ QC
        </div>

        <div class="input-wrap">
            <span class="icon">ğŸ‘¤</span>
            <input type="text" id="staffName"
                   placeholder="áˆáŸ’á˜áŸ„áŸ‡á”á»á‚áŸ’á‚á›á·á€ / å§“å"
                   autocomplete="off"
                   autocorrect="off"
                   spellcheck="false">
        </div>

        <div class="info-row">
            <div class="info-chip">
                <div class="num">10</div>
                <div class="lbl">áŸáŸ†áá½áš</div>
            </div>
            <div class="info-chip">
                <div class="num">49</div>
                <div class="lbl">á–á¶á€áŸ’á™ QC</div>
            </div>
        </div>

        <button class="btn-primary" onclick="startApp()">
            á…á¼á›ášá½á˜ááŸáŸáŸ’á &nbsp;â”
        </button>
    </div>

    <!-- â”€â”€ Quiz Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="card" id="quiz-box">

        <!-- Top bar -->
        <div class="quiz-topbar">
            <div class="candidate-tag">
                <span>ğŸ‘¤</span>
                <span id="staffNameDisplay">...</span>
            </div>
            <div class="score-live">
                â­ <span id="livScore">0</span>/10
            </div>
        </div>

        <!-- Progress -->
        <div class="progress-wrap">
            <div class="progress-meta">
                <span class="progress-label">áœáŒáŸ’áá“áŸ</span>
                <span class="progress-count" id="qNum">1 / 10</span>
            </div>
            <div class="progress-track">
                <div class="progress-fill" id="pFill"></div>
            </div>
        </div>

        <!-- Defect image -->
        <div class="img-box" id="imgBox">
            <div class="img-label">ğŸ” á‚áŸ†ášá¼</div>
            <img id="defectImage" src="" alt="defect">
        </div>

        <!-- Word display -->
        <div class="word-card">
            <div class="chinese-word" id="wordDisplay">...</div>
            <button class="speak-btn" onclick="playVoice()" title="áŸáŸ’áŠá¶á”áŸ‹áŸáŸ†á¡áŸá„">ğŸ”Š</button>
        </div>

        <!-- Hint -->
        <div class="hint-row">
            <div class="hint-dot"></div>
            <div class="hint-text">á‡áŸ’ášá¾áŸášá¾áŸá¢ááŸ’áá“áŸá™ááŸ’ášá¼áœ</div>
        </div>

        <!-- Options -->
        <div class="options-grid" id="optGrid"></div>
    </div>

    <!-- â”€â”€ Result Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="card" id="result-box" style="text-align:center;">
        <span class="result-trophy" id="resTrophy">ğŸ¥‡</span>

        <div class="result-name">
            áˆáŸ’á˜áŸ„áŸ‡áŸ– <strong id="finalUser" style="color:var(--text);">...</strong>
        </div>

        <div class="result-score-ring" id="scoreRing">
            <div class="result-score-inner">
                <div class="result-score-num" id="finalScoreNum">0/10</div>
                <div class="result-score-label">á–á·á“áŸ’á‘á»</div>
            </div>
        </div>

        <div class="result-grade" id="gradeChip">â€“</div>
        <div class="result-msg" id="resultMsg">...</div>

        <div class="status-chip" id="sendingStatus">
            <span>â³</span> <span>á€áŸ†á–á»á„ášá€áŸ’áŸá¶á‘á»á€...</span>
        </div>

        <button class="btn-primary" onclick="location.reload()">
            â†© á’áŸ’áœá¾ááŸáŸáŸ’áá˜áŸ’áŠá„á‘áŸ€á
        </button>
    </div>

    <div class="footer">Â© QC Smart Test Pro &nbsp;Â·&nbsp; Powered by AI</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LOGIC â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
/* â”€â”€ Database â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const database = [
    { cn:"èµ·æ³¡",       km:"á–á„ / á…á¼á›ááŸ’á™á›áŸ‹",          img:"qipao.jpg" },
    { cn:"æ ‡çº¸ä¸è‰¯",   km:"ááŸ‚á˜á˜á·á“á›áŸ’á¢",               img:"biaozhibuliang.jpg" },
    { cn:"ä¿®è¡¥ç—•",     km:"áŸáŸ’á“á¶á˜á‡á½áŸá‡á»á›",             img:"xiubuhen.jpg" },
    { cn:"æ‚è´¨",       km:"á’á¼á›á¸ / á€áŸ†á‘áŸá…á€áŸ†á‘á¸",        img:"zhazhi.jpg" },
    { cn:"è„æ±¡",       km:"á”áŸ’ášá¡á¶á€áŸ‹",                  img:"zangwu.jpg" },
    { cn:"æ ‡çº¸ä½ç½®ä¸å¯¹",km:"á”á·á‘ááŸ‚á˜áá»áŸá‘á¸áá¶áŸ†á„",        img:"biaozhiweizhibudui.jpg" },
    { cn:"æ ‡çº¸ä¸å¯¹ç§°", km:"á”á·á‘ááŸ‚á˜á˜á·á“áŸáŸ’á˜á¾á‚áŸ’á“á¶",       img:"biaozhibuduiceng.jpg" },
    { cn:"é›¾é¢",       km:"áŸáŸ’ášá¢á¶á”áŸ‹",                  img:"wumian.jpg" },
    { cn:"æ©˜çš®",       km:"áŸáŸ†á”á€á€áŸ’ášá¼á…",               img:"jupi.jpg" },
    { cn:"é’ˆå­”",       km:"ášá“áŸ’á’á˜áŸ’á‡á»á›",               img:"zhengkong.jpg" },
    { cn:"æ¶ˆå…‰ä¸è‰¯",   km:"á‘á¹á€ááŸ’á“á¶áŸ†áŸáŸ’ášá¢á¶á”áŸ‹á˜á·á“á›áŸ’á¢",  img:"xiaoguangbuliang.jpg" },
    { cn:"é˜²æ¼†ä¸è‰¯",   km:"á€á¶ášá–á¶ášá‘á¹á€ááŸ’á“á¶áŸ†á˜á·á“á”á¶á“á›áŸ’á¢", img:"fangqibuliang.jpg" },
    { cn:"å·¥å‚",       km:"ášáŸ„á„á…á€áŸ’áš",                 img:"gongchang.jpg" },
    { cn:"è½¦é—´",       km:"ášáŸ„á„á‡á¶á„ / á¢á¶á‚á¶áš",          img:"chejian.jpg" },
    { cn:"åŠå…¬å®¤",     km:"á€á¶ášá·á™á¶á›áŸá™",               img:"bangongshi.jpg" },
    { cn:"ç­é•¿",       km:"á”áŸ’ášá’á¶á“á€áŸ’ášá»á˜",             img:"banzhang.jpg" },
    { cn:"ç¿»è¯‘",       km:"á”á€á”áŸ’ášáŸ‚",                  img:"fanyi.jpg" },
    { cn:"æ³¨æ„å®‰å…¨",   km:"á”áŸ’ášá™áŸááŸ’á“áŸá»áœááŸ’áá·á—á¶á–",     img:"zhuyianquan.jpg" },
    { cn:"ä¸Šç­",       km:"á…á¼á›á’áŸ’áœá¾á€á¶áš",              img:"shangban.jpg" },
    { cn:"ä¸‹ç­",       km:"á…áŸá‰á–á¸á’áŸ’áœá¾á€á¶áš",            img:"xiaban.jpg" },
    { cn:"è¯·å‡",       km:"áŸá»áŸ†á…áŸ’á”á¶á”áŸ‹",               img:"qingjia.jpg" },
    { cn:"è½¦æ¶",       km:"áá½á€á„áŸ‹",                   img:"chejia.jpg" },
    { cn:"å‰å‰",       km:"á†áŸ’á–áŸ„áŸ‡á˜á»á (Fork)",        img:"qiancha.jpg" },
    { cn:"è½¦æŠŠ",       km:"áŠáŸƒá€á„áŸ‹",                   img:"cheba.jpg" },
    { cn:"è½¦åœˆ",       km:"ááŸ’á“á„á€á„áŸ‹",                 img:"chequan.jpg" },
    { cn:"å¤–èƒ",       km:"áŸáŸ†á”á€á€á„áŸ‹",                 img:"waitai.jpg" },
    { cn:"è„šè¸",       km:"áˆáŸ’á“á¶á“áŸ‹",                  img:"jiaota.jpg" },
    { cn:"é“¾æ¡",       km:"á…áŸ’ášáœá¶á€áŸ‹",                 img:"liantiao.jpg" },
    { cn:"åº§å«",       km:"á€áŸ‚á”",                      img:"zuodian.jpg" },
    { cn:"åˆ¹è½¦",       km:"á áŸ’áœáŸ’ášá¶áŸ†á„",               img:"shache.jpg" },
    { cn:"æµ‹é‡å€¼",     km:"áá˜áŸ’á›áŸƒáœá¶áŸáŸ‹á‡á¶á€áŸ‹áŸáŸ’ááŸ‚á„",    img:"celiangzhi.jpg" },
    { cn:"æ ‡å‡†å€¼",     km:"áá˜áŸ’á›áŸƒáŸáŸ’áá„áŸ‹áŠá¶",           img:"biaozhunzhi.jpg" },
    { cn:"ä¸Šé™",       km:"áŠáŸ‚á“á€áŸ†áááŸ‹ á›á¾",            img:"shangxian.jpg" },
    { cn:"ä¸‹é™",       km:"áŠáŸ‚á“á€áŸ†áááŸ‹ á€áŸ’ášáŸ„á˜",         img:"xiaxian.jpg" },
    { cn:"è¶‹åŠ¿å›¾",     km:"á€áŸ’ášá¶á”á“á·á“áŸ’á“á¶á€á¶áš",          img:"qushitu.jpg" },
    { cn:"åˆæ ¼",       km:"á‡á¶á”áŸ‹ (OK)",               img:"hege.jpg" },
    { cn:"ä¸åˆæ ¼",     km:"á’áŸ’á›á¶á€áŸ‹ (NG)",             img:"buhege.jpg" },
    { cn:"å¼€è£‚",       km:"á”áŸ’ášáŸáŸ‡ (Crack)",           img:"kailie.jpg" },
    { cn:"ç„Šç ´",       km:"á•áŸ’áŸá¶á’áŸ’á›á»áŸ‡",              img:"hanpo.jpg" },
    { cn:"æ¼ç„Š",       km:"á—áŸ’á›áŸá…á•áŸ’áŸá¶áš",             img:"louhan.jpg" },
    { cn:"é’ˆçœ¼",       km:"á—áŸ’á“áŸ‚á€á˜áŸ’á‡á»á›",             img:"zhenyan.jpg" },
    { cn:"å‡¹é™·",       km:"á€áŸ†á–á·á / á•á",             img:"aoxian.jpg" },
    { cn:"ç„Šé“åå¿ƒ",   km:"á•áŸ’áŸá¶ášáœáŸ€á…",               img:"handaobianxin.jpg" },
    { cn:"ç”µå‡»ä¼¤",     km:"á†áŸáŸ‡á˜áŸ‰á¶áŸ",               img:"dianjishang.jpg" },
    { cn:"å †ç„Š",       km:"á•áŸ’áŸá¶ášá‘á¼á› (Overlap)",     img:"duihan.jpg" },
    { cn:"å’¬è¾¹",       km:"áŸáŸŠá¸áŸá¶á…áŸ‹á”áŸ†á–á„áŸ‹",           img:"yaobian.jpg" },
    { cn:"é—´éš™",       km:"á…á“áŸ’á›áŸ„áŸ‡ / á á¾á”",           img:"jianxi.jpg" },
    { cn:"ç¢°åˆ®ä¼¤",     km:"á”áŸ‰áŸ‡á‘á„áŸ’á‚á·á… / á€áŸ„áŸ",       img:"pengguashang.jpg" },
    { cn:"ç„Šæ¸£",       km:"á€áŸ†á‘áŸá…á•áŸ’áŸá¶áš",             img:"hanzha.jpg" }
];

/* â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let userName = "";
let quizList = [];
let cur = 0;
let score = 0;

/* â”€â”€ Audio unlock (iOS) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function unlockAudio() {
    try {
        const u = new SpeechSynthesisUtterance(" ");
        u.volume = 0;
        window.speechSynthesis.speak(u);
    } catch(e) {}
}

/* â”€â”€ TTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function playVoice() {
    if (!quizList.length) return;
    window.speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(quizList[cur].cn);
    u.lang  = 'zh-CN';
    u.rate  = 0.8;
    window.speechSynthesis.speak(u);
}

/* â”€â”€ Start â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function startApp() {
    userName = document.getElementById('staffName').value.trim();
    if (!userName) {
        document.getElementById('staffName').focus();
        document.getElementById('staffName').style.borderColor = "var(--danger)";
        return;
    }
    document.getElementById('staffName').style.borderColor = "";
    unlockAudio();

    document.getElementById('login-box').style.display = 'none';
    const qBox = document.getElementById('quiz-box');
    qBox.style.display = 'block';
    qBox.classList.add('fade-in');

    document.getElementById('staffNameDisplay').innerText = userName;
    quizList = [...database].sort(() => 0.5 - Math.random()).slice(0, 10);
    cur = 0; score = 0;
    showQ();
}

/* â”€â”€ Show Question â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function showQ() {
    const q = quizList[cur];

    // Progress
    document.getElementById('pFill').style.width   = (cur / 10 * 100) + "%";
    document.getElementById('qNum').innerText       = (cur + 1) + " / 10";
    document.getElementById('livScore').innerText   = score;

    // Word
    document.getElementById('wordDisplay').innerText = q.cn;

    // Image
    const imgBox = document.getElementById('imgBox');
    const imgTag = document.getElementById('defectImage');
    if (q.img) {
        imgTag.src = q.img;
        imgBox.style.display = 'block';
    } else {
        imgBox.style.display = 'none';
    }

    // Auto-speak after short delay
    setTimeout(playVoice, 400);

    // Build options
    const wrong = database
        .filter(x => x.km !== q.km)
        .sort(() => 0.5 - Math.random())
        .slice(0, 3);
    const opts = [...wrong, q].sort(() => 0.5 - Math.random());

    const grid = document.getElementById('optGrid');
    grid.innerHTML = '';
    opts.forEach(obj => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.innerText = obj.km;
        btn.onclick = () => handleAnswer(btn, obj, q);
        grid.appendChild(btn);
    });
}

/* â”€â”€ Handle Answer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function handleAnswer(btn, selected, correct) {
    // Disable all
    document.querySelectorAll('.option-btn').forEach(b => {
        b.disabled = true;
        b.style.cursor = 'default';
    });

    if (selected.km === correct.km) {
        btn.classList.add('correct');
        score++;
        document.getElementById('livScore').innerText = score;
    } else {
        btn.classList.add('wrong');
        // Highlight correct answer in green
        document.querySelectorAll('.option-btn').forEach(b => {
            if (b.innerText === correct.km) b.classList.add('correct');
        });
    }

    setTimeout(() => {
        cur++;
        if (cur < 10) showQ();
        else showResult();
    }, 1300);
}

/* â”€â”€ Show Result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function showResult() {
    document.getElementById('quiz-box').style.display = 'none';

    const box = document.getElementById('result-box');
    box.style.display = 'block';
    box.classList.add('fade-in');

    document.getElementById('finalUser').innerText    = userName;
    document.getElementById('finalScoreNum').innerText = score + "/10";

    // Animated conic ring
    const pct = (score / 10 * 100).toFixed(0);
    document.getElementById('scoreRing').style.setProperty('--pct', pct + '%');

    // Grade & trophy
    let grade, gradeClass, trophy, msg;
    if (score === 10)       { grade="S â€” á›áŸ’á¢á¥áááŸ’á…áŸ„áŸ‡!"; gradeClass="grade-s"; trophy="ğŸ†"; msg="á¢áŸ’á“á€áˆáŸ’á“áŸ‡ 100%! á›á‘áŸ’á’á•á›á¥áááŸ’á…áŸ„áŸ‡ âœ¨"; }
    else if (score >= 8)    { grade="A â€” á›áŸ’á¢áá¶áŸáŸ‹";    gradeClass="grade-a"; trophy="ğŸ¥‡"; msg="á›á‘áŸ’á’á•á›á›áŸ’á¢! á”á“áŸ’áášáŸ€á“áŸá¼á˜áŸ’á”á¸!"; }
    else if (score >= 6)    { grade="B â€” á›áŸ’á¢á”á„áŸ’á‚á½áš";  gradeClass="grade-b"; trophy="ğŸ¥ˆ"; msg="á›áŸ’á¢! á”áŸ‰á»á“áŸ’ááŸ‚ááŸ’ášá¼áœá”á“áŸ’áá¢á—á·áœáŒáŸ’á!"; }
    else                    { grade="C â€” ááŸ’ášá¼áœá€áŸ‚";    gradeClass="grade-c"; trophy="ğŸ“š"; msg="ááŸ’ášá¼áœá€á¶ášá¢á¶á“á¡á¾á„áœá·á‰! á–áŸ’á™á¶á™á¶á˜á˜áŸ’áŠá„á‘áŸ€á!"; }

    document.getElementById('resTrophy').innerText = trophy;
    const gradeEl = document.getElementById('gradeChip');
    gradeEl.innerText = grade;
    gradeEl.className = 'result-grade ' + gradeClass;
    document.getElementById('resultMsg').innerText = msg;

    if (score >= 7) {
        confetti({ particleCount: 160, spread: 80, origin: { y: 0.55 } });
    }

    // Send to Google Sheets
    postToGoogleSheet(userName, score + " / 10");
}

/* â”€â”€ Google Sheets POST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function postToGoogleSheet(name, pts) {
    const url = "https://docs.google.com/forms/d/e/1FAIpQLSewAOFk30IYgR9ZIVR8yZozbbprXFzI18P-aZV6XJi8cFCUoQ/formResponse";
    const body = new URLSearchParams();
    body.append("entry.2026832449", name);
    body.append("entry.1026172260", pts);

    const statusEl = document.getElementById('sendingStatus');

    fetch(url, {
        method:  "POST",
        mode:    "no-cors",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body:    body.toString()
    })
    .then(() => {
        statusEl.innerHTML =
            '<span class="dot-ok">âœ…</span><span>ášá€áŸ’áŸá¶á‘á»á€á€áŸ’á“á»á„ Google Sheet ášá½á…ášá¶á›áŸ‹</span>';
    })
    .catch(() => {
        statusEl.innerHTML =
            '<span class="dot-err">âŒ</span><span>á”á‰áŸ’á á¶á¢áŸŠá¸á“á’áºáá·á â€” á•áŸ’á‰á¾ Screenshot á±áŸ’á™á˜áŸ</span>';
    });
}

/* â”€â”€ Enter key support â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
document.addEventListener('keydown', e => {
    if (e.key === 'Enter') {
        if (document.getElementById('login-box').style.display !== 'none' &&
            document.getElementById('login-box').style.display !== '') {
            startApp();
        }
    }
});
</script>
</body>
</html>
