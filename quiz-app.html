<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QC Quiz - ááŸáŸáŸ’ááŸá˜ááŸ’áá—á¶á–</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', 'Khmer OS Battambang', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 500px;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        h1 {
            color: #0051a2;
            margin: 0 0 10px 0;
            font-size: 24px;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: #eee;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.3s ease;
        }

        .score-badge {
            background: #e3f2fd;
            color: #0051a2;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
            display: inline-block;
            margin-bottom: 20px;
        }

        .question-box {
            margin-bottom: 30px;
        }

        .chinese-word-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 10px 0;
        }

        .chinese-word {
            font-size: 50px;
            font-weight: bold;
            color: #333;
            text-shadow: 2px 2px 0px #eee; 
        }

        /* á”áŸŠá¼áá»á„á¢á¶á“áŸá˜áŸ’á›áŸá„ */
        .speak-btn {
            background: #007bff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s, background-color 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        .speak-btn:active {
            transform: scale(0.9);
            background: #0056b3;
        }

        .speak-btn.playing {
            background: #e74c3c;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
            100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }

        .question-text {
            color: #666;
            font-size: 16px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        button.option-btn {
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px 10px;
            font-family: 'Khmer OS Battambang';
            font-size: 16px;
            font-weight: bold;
            color: #444;
            cursor: pointer;
            transition: all 0.2s;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        button.option-btn:hover {
            border-color: #0051a2;
            background-color: #f8fbff;
            transform: translateY(-2px);
        }

        button.option-btn:active {
            transform: scale(0.95);
        }

        button.correct {
            background-color: #2ecc71;
            color: white;
            border-color: #2ecc71;
            box-shadow: 0 4px 10px rgba(46, 204, 113, 0.4);
        }

        button.wrong {
            background-color: #e74c3c;
            color: white;
            border-color: #e74c3c;
            animation: shake 0.4s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .result-screen {
            display: none;
        }

        .final-score {
            font-size: 60px;
            font-weight: bold;
            color: #0051a2;
            margin: 20px 0;
        }

        .feedback-text {
            font-size: 18px;
            margin-bottom: 30px;
            color: #555;
            font-weight: bold;
        }

        .restart-btn {
            background: #0051a2;
            color: white;
            border: none;
            border-radius: 10px;
            width: 100%;
            height: 50px;
            font-size: 18px;
            cursor: pointer;
            font-weight: bold;
        }

        .restart-btn:hover {
            background: #003d7a;
        }

    </style>
</head>
<body>

    <div class="container">
        <!-- á•áŸ’á“áŸ‚á€áŸáŸ†áá½áš -->
        <div id="quiz-screen">
            <h1>âœï¸ ááŸáŸáŸ’ááŸá˜ááŸ’áá—á¶á– (QC Quiz)</h1>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="score-badge">áŸáŸ†áá½ášá‘á¸ <span id="currentQ">1</span> / <span id="totalQ">10</span></div>

            <div class="question-box">
                <div class="question-text">á…á»á…áŸáŸ’áá¶á”áŸ‹ ğŸ”Š á á¾á™á‡áŸ’ášá¾áŸášá¾áŸá…á˜áŸ’á›á¾á™</div>
                <div class="chinese-word-container">
                    <div class="chinese-word" id="chineseWord">...</div>
                    <button class="speak-btn" onclick="speakText()" title="á¢á¶á“á–á¶á€áŸ’á™á“áŸáŸ‡">ğŸ”Š</button>
                </div>
            </div>

            <div class="options-grid" id="optionsContainer">
                <!-- á‡á˜áŸ’ášá¾áŸá“á¹á„á›áŸá…á“áŸ…á‘á¸á“áŸáŸ‡ -->
            </div>
        </div>

        <!-- á•áŸ’á“áŸ‚á€á›á‘áŸ’á’á•á› -->
        <div id="result-screen" class="result-screen">
            <h1>ğŸ‰ á›á‘áŸ’á’á•á›á€á¶ášá”áŸ’ášá¡á„</h1>
            <div style="font-size: 80px; margin: 10px 0;">ğŸ†</div>
            <div class="final-score" id="finalScore">0</div>
            <div class="feedback-text" id="finalFeedback">...</div>
            <button class="restart-btn" onclick="startQuiz()">ğŸ”„ á”áŸ’ášá¡á„á˜áŸ’áá„á‘áŸ€á</button>
        </div>
    </div>

    <script>
        // áŸ¡. áƒáŸ’á›á¶áŸ†á„á–á¶á€áŸ’á™
        const database = [
            { cn: "å·¥å‚", km: "ášáŸ„á„á…á€áŸ’áš" }, { cn: "è½¦é—´", km: "ášáŸ„á„á‡á¶á„ / á¢á¶á‚á¶áš" }, { cn: "åŠå…¬å®¤", km: "á€á¶ášá·á™á¶á›áŸá™" },
            { cn: "ç­é•¿", km: "á”áŸ’ášá’á¶á“á€áŸ’ášá»á˜" }, { cn: "ç¿»è¯‘", km: "á¢áŸ’á“á€á”á€á”áŸ’ášáŸ‚" }, { cn: "æ³¨æ„å®‰å…¨", km: "á”áŸ’ášá™áŸááŸ’á“áŸá»áœááŸ’áá·á—á¶á–" },
            { cn: "ä¸Šç­", km: "á…á¼á›á’áŸ’áœá¾á€á¶áš" }, { cn: "ä¸‹ç­", km: "á…áŸá‰á–á¸á’áŸ’áœá¾á€á¶áš" }, { cn: "è¯·å‡", km: "áŸá»áŸ†á…áŸ’á”á¶á”áŸ‹" },
            { cn: "è½¦æ¶", km: "áá½á€á„áŸ‹" }, { cn: "å‰å‰", km: "á†áŸ’á–áŸ„áŸ‡á˜á»á (Fork)" }, { cn: "è½¦æŠŠ", km: "áŠáŸƒá€á„áŸ‹" },
            { cn: "è½¦åœˆ", km: "ááŸ’á“á„á€á„áŸ‹" }, { cn: "å¤–èƒ", km: "áŸáŸ†á”á€á€á„áŸ‹" }, { cn: "è„šè¸", km: "áˆáŸ’á“á¶á“áŸ‹" },
            { cn: "é“¾æ¡", km: "á…áŸ’ášáœá¶á€áŸ‹" }, { cn: "åº§å«", km: "á€áŸ‚á”" }, { cn: "åˆ¹è½¦", km: "á áŸ’áœáŸ’ášá¶áŸ†á„" },
            { cn: "æµ‹é‡å€¼", km: "áá˜áŸ’á›áŸƒáœá¶áŸáŸ‹á‡á¶á€áŸ‹áŸáŸ’ááŸ‚á„" }, { cn: "æ ‡å‡†å€¼", km: "áá˜áŸ’á›áŸƒáŸáŸ’áá„áŸ‹áŠá¶" }, { cn: "ä¸Šé™", km: "áŠáŸ‚á“á€áŸ†áááŸ‹ á›á¾" },
            { cn: "ä¸‹é™", km: "áŠáŸ‚á“á€áŸ†áááŸ‹ á€áŸ’ášáŸ„á˜" }, { cn: "è¶‹åŠ¿å›¾", km: "á€áŸ’ášá¶á”á“á·á“áŸ’á“á¶á€á¶áš" }, { cn: "åˆæ ¼", km: "á‡á¶á”áŸ‹ (OK)" },
            { cn: "ä¸åˆæ ¼", km: "á’áŸ’á›á¶á€áŸ‹ (NG)" }, { cn: "å¼€è£‚", km: "á”áŸ’ášáŸáŸ‡ (Crack)" }, { cn: "ç„Šç ´", km: "á•áŸ’áŸá¶á’áŸ’á›á»áŸ‡" },
            { cn: "æ¼ç„Š", km: "á—áŸ’á›áŸá…á•áŸ’áŸá¶áš" }, { cn: "é’ˆçœ¼", km: "á—áŸ’á“áŸ‚á€á˜áŸ’á‡á»á›" }, { cn: "å‡¹é™·", km: "á€áŸ†á–á·á / á•á" },
            { cn: "ç„Šé“åå¿ƒ", km: "á•áŸ’áŸá¶ášáœáŸ€á…" }, { cn: "ç”µå‡»ä¼¤", km: "á†áŸáŸ‡á˜áŸ‰á¶áŸ" }, { cn: "å †ç„Š", km: "á•áŸ’áŸá¶ášá‘á¼á›" },
            { cn: "å’¬è¾¹", km: "áŸáŸŠá¸áŸá¶á…áŸ‹á”áŸ†á–á„áŸ‹" }, { cn: "é—´éš™", km: "á…á“áŸ’á›áŸ„áŸ‡ / á á¾á”" }, { cn: "ç¢°åˆ®ä¼¤", km: "á”áŸ‰áŸ‡á‘á„áŸ’á‚á·á… / á€áŸ„áŸ" },
            { cn: "ç„Šæ¸£", km: "á€áŸ†á‘áŸá…á•áŸ’áŸá¶áš" }
        ];

        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        const totalQuestions = 10;
        let speechMsg = new SpeechSynthesisUtterance();

        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const chineseWordEl = document.getElementById('chineseWord');
        const optionsContainer = document.getElementById('optionsContainer');
        const currentQEl = document.getElementById('currentQ');
        const totalQEl = document.getElementById('totalQ');
        const progressBar = document.getElementById('progressBar');

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- á˜á»áá„á¶ášá¢á¶á“áŸá˜áŸ’á›áŸá„ ---
        function speakText() {
            const text = chineseWordEl.innerText;
            const btn = document.querySelector('.speak-btn');
            
            // á€áŸ†áááŸ‹á—á¶áŸá¶á…á·á“ (zh-CN)
            speechMsg.text = text;
            speechMsg.lang = 'zh-CN';
            speechMsg.rate = 0.8; // á¢á¶á“á˜á½á™áŸ—
            
            // Effect
            btn.classList.add('playing');
            speechMsg.onend = function() {
                btn.classList.remove('playing');
            };

            window.speechSynthesis.cancel(); // áˆá”áŸ‹á¢á¶á›á˜á½á™áŸá·á“
            window.speechSynthesis.speak(speechMsg);
        }

        function startQuiz() {
            score = 0;
            currentQuestionIndex = 0;
            quizScreen.style.display = 'block';
            resultScreen.style.display = 'none';
            
            const shuffledDB = shuffle([...database]);
            questions = shuffledDB.slice(0, totalQuestions);
            
            totalQEl.innerText = totalQuestions;
            loadQuestion();
        }

        function loadQuestion() {
            const currentData = questions[currentQuestionIndex];
            
            chineseWordEl.innerText = currentData.cn;
            currentQEl.innerText = currentQuestionIndex + 1;
            progressBar.style.width = `${((currentQuestionIndex) / totalQuestions) * 100}%`;
            
            // á¢á¶á“áŸá˜áŸ’á›áŸá„áŸáŸ’áœáŸá™á”áŸ’ášáœááŸ’áá·á–áŸá›á”á¾á€áŸáŸ†áá½áš (Optional - á”á¾á˜á·á“á…á„áŸ‹á±áŸ’á™ášáŸ†áá¶á“ á¢á¶á…á›á»á”á”á“áŸ’á‘á¶ááŸ‹á“áŸáŸ‡)
            setTimeout(() => speakText(), 300);

            let options = [currentData];
            let distractors = database.filter(item => item.cn !== currentData.cn);
            distractors = shuffle(distractors).slice(0, 3);
            
            options = options.concat(distractors);
            options = shuffle(options);

            optionsContainer.innerHTML = '';
            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.classList.add('option-btn');
                btn.innerText = opt.km;
                btn.onclick = () => checkAnswer(btn, opt.km === currentData.km);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(btn, isCorrect) {
            const allBtns = optionsContainer.querySelectorAll('button');
            allBtns.forEach(b => b.disabled = true);

            if (isCorrect) {
                btn.classList.add('correct');
                score++;
            } else {
                btn.classList.add('wrong');
                allBtns.forEach(b => {
                    if (b.innerText === questions[currentQuestionIndex].km) {
                        b.classList.add('correct');
                    }
                });
            }

            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < totalQuestions) {
                    loadQuestion();
                } else {
                    showResult();
                }
            }, 1200);
        }

        function showResult() {
            quizScreen.style.display = 'none';
            resultScreen.style.display = 'block';
            
            document.getElementById('finalScore').innerText = `${score} / ${totalQuestions}`;
            
            const feedbackEl = document.getElementById('finalFeedback');
            if (score === 10) {
                feedbackEl.innerText = "á›áŸ’á¢á¥áááŸ’á…áŸ„áŸ‡! á¢áŸ’á“á€á‚áºá‡á¶á€áŸ†á–á¼á› QC! ğŸŒŸ";
                feedbackEl.style.color = "#27ae60";
            } else if (score >= 8) {
                feedbackEl.innerText = "á’áŸ’áœá¾á”á¶á“á›áŸ’á¢áá¶áŸáŸ‹! áŸáŸŠá¼áŸ—á”á“áŸ’áá·á…á‘áŸ€á! ğŸ‘";
                feedbackEl.style.color = "#2980b9";
            } else if (score >= 5) {
                feedbackEl.innerText = "á›áŸ’á¢á”á„áŸ’á‚á½áš! ááŸ’ášá¼áœášáŸ€á“á–á¶á€áŸ’á™á”á“áŸ’ááŸ‚á˜á‘áŸ€ááŸ” ğŸ“š";
                feedbackEl.style.color = "#f39c12";
            } else {
                feedbackEl.innerText = "á€á»áŸ†á”áŸ„áŸ‡á”á„áŸ‹! á‘áŸ…á˜á¾á› Flashcard á¡á¾á„áœá·á‰áŸ” ğŸ’ª";
                feedbackEl.style.color = "#c0392b";
            }
        }

        // á…á¶á”áŸ‹á•áŸ’áá¾á˜
        startQuiz();

    </script>
</body>
</html>
